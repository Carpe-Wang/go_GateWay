(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-569050ae"],{"110a":function(e,t,r){"use strict";var i=r("12e1"),o=r.n(i);o.a},"12e1":function(e,t,r){},"22ce":function(e,t,r){"use strict";r.d(t,"f",(function(){return o})),r.d(t,"d",(function(){return a})),r.d(t,"b",(function(){return l})),r.d(t,"i",(function(){return s})),r.d(t,"e",(function(){return n})),r.d(t,"g",(function(){return c})),r.d(t,"c",(function(){return _})),r.d(t,"j",(function(){return u})),r.d(t,"a",(function(){return m})),r.d(t,"h",(function(){return d}));var i=r("b775");function o(e){return Object(i["a"])({url:"/service/service_list",method:"get",params:e})}function a(e){return Object(i["a"])({url:"/service/service_delete",method:"get",params:e})}function l(e){return Object(i["a"])({url:"/service/service_add_http",method:"post",data:e})}function s(e){return Object(i["a"])({url:"/service/service_update_http",method:"post",data:e})}function n(e){return Object(i["a"])({url:"/service/service_detail",method:"get",params:e})}function c(e){return Object(i["a"])({url:"/service/service_stat",method:"get",params:e})}function _(e){return Object(i["a"])({url:"/service/service_add_tcp",method:"post",data:e})}function u(e){return Object(i["a"])({url:"/service/service_update_tcp",method:"post",data:e})}function m(e){return Object(i["a"])({url:"/service/service_add_grpc",method:"post",data:e})}function d(e){return Object(i["a"])({url:"/service/service_update_grpc",method:"post",data:e})}},8446:function(e,t,r){"use strict";r.r(t);var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"mixin-components-container"},[r("el-row",[r("el-form",{ref:"form",attrs:{model:e.form,"label-width":"130px"}},[r("el-card",{staticClass:"box-card",staticStyle:{"margin-bottom":"20px"}},[r("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[!1===e.is_edit?r("span",[e._v("创建TCP服务")]):e._e(),e._v(" "),!0===e.is_edit?r("span",[e._v("修改TCP服务")]):e._e()]),e._v(" "),r("div",[r("el-form-item",{staticClass:"is-required",attrs:{label:"服务名称"}},[r("el-input",{attrs:{disabled:!0===e.is_edit,placeholder:"6-128位字母数字下划线"},model:{value:e.form.service_name,callback:function(t){e.$set(e.form,"service_name",t)},expression:"form.service_name"}})],1),e._v(" "),r("el-form-item",{staticClass:"is-required",attrs:{label:"服务描述"}},[r("el-input",{attrs:{placeholder:"最多255字符，必填"},model:{value:e.form.service_desc,callback:function(t){e.$set(e.form,"service_desc",t)},expression:"form.service_desc"}})],1),e._v(" "),r("el-form-item",{staticClass:"is-required",attrs:{label:"端口"}},[r("el-input",{attrs:{disabled:!0===e.is_edit,placeholder:"需要设置8001-8999范围内数字，必填"},model:{value:e.form.port,callback:function(t){e.$set(e.form,"port",t)},expression:"form.port"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"开启验证"}},[r("el-switch",{attrs:{"active-value":"1","inactive-value":"0"},model:{value:e.form.open_auth,callback:function(t){e.$set(e.form,"open_auth",t)},expression:"form.open_auth"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"IP白名单"}},[r("el-input",{attrs:{placeholder:"格式: 127.0.0.1 多条换行，白名单优先级高于黑名单",type:"textarea",autosize:{minRows:2,maxRows:20}},model:{value:e.form.white_list,callback:function(t){e.$set(e.form,"white_list",t)},expression:"form.white_list"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"IP黑名单"}},[r("el-input",{attrs:{placeholder:"格式: 127.0.0.1 多条换行",type:"textarea",autosize:{minRows:2,maxRows:20}},model:{value:e.form.black_list,callback:function(t){e.$set(e.form,"black_list",t)},expression:"form.black_list"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"客户端限流"}},[r("el-input",{attrs:{placeholder:"0表示无限制"},model:{value:e.form.clientip_flow_limit,callback:function(t){e.$set(e.form,"clientip_flow_limit",t)},expression:"form.clientip_flow_limit"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"服务端限流"}},[r("el-input",{attrs:{placeholder:"0表示无限制"},model:{value:e.form.service_flow_limit,callback:function(t){e.$set(e.form,"service_flow_limit",t)},expression:"form.service_flow_limit"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"轮询方式"}},[r("el-radio",{attrs:{label:"0"},model:{value:e.form.round_type,callback:function(t){e.$set(e.form,"round_type",t)},expression:"form.round_type"}},[e._v("random")]),e._v(" "),r("el-radio",{attrs:{label:"1"},model:{value:e.form.round_type,callback:function(t){e.$set(e.form,"round_type",t)},expression:"form.round_type"}},[e._v("round-robin")]),e._v(" "),r("el-radio",{attrs:{label:"2"},model:{value:e.form.round_type,callback:function(t){e.$set(e.form,"round_type",t)},expression:"form.round_type"}},[e._v("weight_round-robin")]),e._v(" "),r("el-radio",{attrs:{label:"3"},model:{value:e.form.round_type,callback:function(t){e.$set(e.form,"round_type",t)},expression:"form.round_type"}},[e._v("ip_hash")])],1),e._v(" "),r("el-form-item",{staticClass:"is-required",attrs:{label:"IP列表"}},[r("el-input",{attrs:{placeholder:"格式: 127.0.0.1:80 多条换行",type:"textarea",autosize:{minRows:2,maxRows:20}},model:{value:e.form.ip_list,callback:function(t){e.$set(e.form,"ip_list",t)},expression:"form.ip_list"}})],1),e._v(" "),r("el-form-item",{staticClass:"is-required",attrs:{label:"权重列表"}},[r("el-input",{attrs:{placeholder:"格式: 50 多条换行",type:"textarea",autosize:{minRows:2,maxRows:20}},model:{value:e.form.weight_list,callback:function(t){e.$set(e.form,"weight_list",t)},expression:"form.weight_list"}})],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary",loading:e.disableButton},on:{click:e.onSubmit}},[e._v("立即提交")])],1)],1)])],1)],1)],1)},o=[],a=(r("c5f6"),r("a481"),r("6b54"),r("22ce")),l={components:{},data:function(){return{is_edit:!1,disableButton:!1,form:{id:"0",service_name:"",service_desc:"",port:"",rule_type:"0",rule:"",need_https:"0",need_strip_uri:"1",need_websocket:"1",url_rewrite:"",header_transfor:"",open_auth:"0",black_list:"",white_list:"",white_host_name:"",clientip_flow_limit:"",service_flow_limit:"",round_type:"2",ip_list:"",weight_list:"",forbid_list:"",upstream_connect_timeout:"",upstream_header_timeout:"",upstream_idle_timeout:"",upstream_max_idle:""}}},created:function(){var e=this.$route.params&&this.$route.params.id;e>0&&(this.is_edit=!0,this.fetchData(e)),this.tempRoute=Object.assign({},this.$route)},methods:{fetchData:function(e){var t=this;this.listLoading=!0;var r={id:e};Object(a["e"])(r).then((function(e){var r=e.data;t.form.id=r.info.id,t.form.service_name=r.info.service_name,t.form.service_desc=r.info.service_desc,t.form.port=r.tcp_rule.port.toString(),t.form.rule_type=r.http_rule.rule_type.toString(),t.form.rule=r.http_rule.rule,t.form.need_https=r.http_rule.need_https.toString(),t.form.need_strip_uri=r.http_rule.need_strip_uri.toString(),t.form.need_websocket=r.http_rule.need_websocket.toString(),t.form.url_rewrite=r.http_rule.url_rewrite.replace(/,/g,"\n"),t.form.header_transfor=r.http_rule.header_transfor.replace(/,/g,"\n"),t.form.open_auth=r.access_control.open_auth.toString(),t.form.black_list=r.access_control.black_list.replace(/,/g,"\n"),t.form.white_list=r.access_control.white_list.replace(/,/g,"\n"),t.form.white_host_name=r.access_control.white_host_name.replace(/,/g,"\n"),t.form.clientip_flow_limit=r.access_control.clientip_flow_limit,t.form.service_flow_limit=r.access_control.service_flow_limit,t.form.round_type=r.load_balance.round_type.toString(),t.form.ip_list=r.load_balance.ip_list.replace(/,/g,"\n"),t.form.weight_list=r.load_balance.weight_list.replace(/,/g,"\n"),t.form.forbid_list=r.load_balance.forbid_list.replace(/,/g,"\n"),t.form.upstream_connect_timeout=r.load_balance.upstream_connect_timeout,t.form.upstream_header_timeout=r.load_balance.upstream_header_timeout,t.form.upstream_idle_timeout=r.load_balance.upstream_idle_timeout,t.form.upstream_max_idle=r.load_balance.upstream_max_idle,t.listLoading=!1}))},onSubmit:function(){var e=this;this.disableButton=!0;var t=Object.assign({},this.form);t.port=Number(t.port),t.rule_type=Number(t.rule_type),t.need_https=Number(t.need_https),t.need_strip_uri=Number(t.need_strip_uri),t.need_websocket=Number(t.need_websocket),t.open_auth=Number(t.open_auth),t.round_type=Number(t.round_type),t.clientip_flow_limit=Number(t.clientip_flow_limit),t.service_flow_limit=Number(t.service_flow_limit),t.upstream_connect_timeout=Number(t.upstream_connect_timeout),t.upstream_header_timeout=Number(t.upstream_header_timeout),t.upstream_idle_timeout=Number(t.upstream_idle_timeout),t.upstream_max_idle=Number(t.upstream_max_idle),t.ip_list=t.ip_list.replace(/\n/g,","),t.weight_list=t.weight_list.replace(/\n/g,","),t.forbid_list=t.forbid_list.replace(/\n/g,","),t.white_host_name=t.white_host_name.replace(/\n/g,","),t.white_list=t.white_list.replace(/\n/g,","),t.black_list=t.black_list.replace(/\n/g,","),t.header_transfor=t.header_transfor.replace(/\n/g,","),t.url_rewrite=t.url_rewrite.replace(/\n/g,","),this.is_edit?Object(a["j"])(t).then((function(){e.disableButton=!1,e.$notify({title:"Success",message:"Submit Successfully",type:"success",duration:500})}),(function(){e.disableButton=!1})):Object(a["c"])(t).then((function(){e.disableButton=!1,e.$notify({title:"Success",message:"Submit Successfully",type:"success",duration:500})}),(function(){e.disableButton=!1}))}}},s=l,n=(r("110a"),r("2877")),c=Object(n["a"])(s,i,o,!1,null,"19bb35ad",null);t["default"]=c.exports}}]);